<!-- src/app/templates/reports/list.html -->
{% extends "base.html" %}

{% block title %}Reports - Web Security Compliance Checker{% endblock %}

{% block content %}
<div class="page-container">
    <h1>Your PDF Reports</h1>

    <section class="section">
        {% if reports %}
            <table class="table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Scan ID</th>
                        <th>File Path</th>
                        <th>Created</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                {% for report in reports %}
                    <tr>
                        <td>{{ report.id }}</td>
                        <td>{{ report.scan_id }}</td>
                        <td>{{ report.file_path }}</td>
                        <td>{{ report.created_at }}</td>
                        <td>
                            <a
                                href="/api/v1/reports/{{ report.id }}/download"
                                class="btn-secondary"
                                target="_blank"
                            >
                                Download
                            </a>

                            <!-- Simple POST that you can wire in backend to call DELETE -->
                            <form
                                method="post"
                                action="/api/v1/reports/{{ report.id }}"
                                style="display:inline;"
                                onsubmit="return confirm('Delete this report?');"
                            >
                                <!-- If you add a small FastAPI helper route to accept POST and call delete,
                                     you won't need JS here. Otherwise, handle DELETE via JS/fetch. -->
                                <button type="submit" class="btn-danger">
                                    Delete
                                </button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>
                You have no reports yet.
                Generate one from a <a href="/api/v1/scans/html">scan</a>.
            </p>
        {% endif %}
    </section>
</div>
{% endblock %}