<!-- src/app/templates/targets/list.html -->
{% extends "base.html" %}

{% block title %}Targets - Web Security Compliance Checker{% endblock %}

{% block content %}
<div class="page-container">
    <h1>Your Targets</h1>

    <section class="section">
        <h2>Add Target</h2>
        <form method="post" action="/api/v1/targets/html" class="simple-form">
            <div class="form-group">
                <label for="url">Target URL</label>
                <input
                    id="url"
                    name="url"
                    type="url"
                    required
                    placeholder="https://example.com"
                >
            </div>

            <div class="form-group">
                <label for="name">Name (optional)</label>
                <input
                    id="name"
                    name="name"
                    type="text"
                    placeholder="My website"
                >
            </div>

            <div class="form-actions">
                <button type="submit">Add Target</button>
            </div>
        </form>
    </section>

    <section class="section">
        <h2>Existing Targets</h2>

        {% if targets %}
            <table class="table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>URL</th>
                        <th>Name</th>
                        <th>Created</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                {% for target in targets %}
                    <tr>
                        <td>{{ target.id }}</td>
                        <td>{{ target.url }}</td>
                        <td>{{ target.name or "-" }}</td>
                        <td>{{ target.created_at }}</td>
                        <td>
                            <form method="post" action="/api/v1/targets/{{ target.id }}/delete/html" style="display:inline;">
                                <button type="submit" class="btn-danger" onclick="return confirm('Delete this target?');">
                                    Delete
                                </button>
                            </form>
                            <form method="post" action="/api/v1/scans/start/html" style="display:inline;">
                                <input type="hidden" name="target_id" value="{{ target.id }}">
                                <button type="submit" class="btn-secondary">
                                    Start Scan
                                </button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>You have no targets yet. Add one using the form above.</p>
        {% endif %}
    </section>
</div>
{% endblock %}